%s FREE
%s IN_TAG
%s SINGLE_QUOTES
%s DOUBLE_QUOTES
%s CDATA

%%
  BEGIN(FREE);
<FREE>"<!--"(([^-])|(-[^-]))*"-->" ;
<FREE>\<[^!] {ECHO; BEGIN(IN_TAG);}
<IN_TAG>\' {ECHO; BEGIN(SINGLE_QUOTES);}
<IN_TAG>\" {ECHO; BEGIN(DOUBLE_QUOTES);}

<SINGLE_QUOTES>\' {ECHO; BEGIN(IN_TAG);}
<DOUBLE_QUOTES>\" {ECHO; BEGIN(IN_TAG);}
<IN_TAG>\> {ECHO; BEGIN(FREE);}

<FREE>"<![CDATA[" {ECHO; BEGIN(CDATA);}
<CDATA>"]]>" {ECHO; BEGIN(FREE);}
%%
